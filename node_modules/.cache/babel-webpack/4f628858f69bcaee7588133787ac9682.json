{"ast":null,"code":"import { Subject } from 'rxjs';\nimport { takeUntil, catchError } from 'rxjs/operators';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../../core/services/products.service\";\nimport * as i2 from \"@angular/common\";\nimport * as i3 from \"@angular/material/progress-spinner\";\nimport * as i4 from \"@angular/material/card\";\n\nfunction ProductsComponent_div_0_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 3);\n    i0.ɵɵelement(1, \"mat-spinner\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction ProductsComponent_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 4);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r1.errorMessage, \"\\n\");\n  }\n}\n\nfunction ProductsComponent_div_2_div_3_mat_card_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-card\");\n    i0.ɵɵelementStart(1, \"mat-card-title\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"mat-card-content\");\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const account_r11 = ctx.$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(account_r11.name);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate2(\" \\u0411\\u0430\\u043B\\u0430\\u043D\\u0441: \", account_r11.balance, \" \", account_r11.currency, \" \");\n  }\n}\n\nfunction ProductsComponent_div_2_div_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtemplate(1, ProductsComponent_div_2_div_3_mat_card_1_Template, 5, 3, \"mat-card\", 7);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const accounts_r9 = ctx.ngIf;\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngForOf\", accounts_r9);\n  }\n}\n\nfunction ProductsComponent_div_2_ng_template_5_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"p\");\n    i0.ɵɵtext(1, \"\\u0423 \\u0432\\u0430\\u0441 \\u043D\\u0435\\u0442 \\u0434\\u043E\\u0441\\u0442\\u0443\\u043F\\u043D\\u044B\\u0445 \\u0441\\u0447\\u0435\\u0442\\u043E\\u0432.\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction ProductsComponent_div_2_div_9_mat_card_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-card\");\n    i0.ɵɵelementStart(1, \"mat-card-title\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"mat-card-content\");\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const card_r14 = ctx.$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(card_r14.number);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate2(\" \\u041B\\u0438\\u043C\\u0438\\u0442: \", card_r14.limit, \" \", card_r14.currency, \" \");\n  }\n}\n\nfunction ProductsComponent_div_2_div_9_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtemplate(1, ProductsComponent_div_2_div_9_mat_card_1_Template, 5, 3, \"mat-card\", 7);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const cards_r12 = ctx.ngIf;\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngForOf\", cards_r12);\n  }\n}\n\nfunction ProductsComponent_div_2_ng_template_11_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"p\");\n    i0.ɵɵtext(1, \"\\u0423 \\u0432\\u0430\\u0441 \\u043D\\u0435\\u0442 \\u0434\\u043E\\u0441\\u0442\\u0443\\u043F\\u043D\\u044B\\u0445 \\u043A\\u0430\\u0440\\u0442.\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction ProductsComponent_div_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵelementStart(1, \"h2\");\n    i0.ɵɵtext(2, \"\\u0412\\u0430\\u0448\\u0438 \\u0441\\u0447\\u0435\\u0442\\u0430\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(3, ProductsComponent_div_2_div_3_Template, 2, 1, \"div\", 2);\n    i0.ɵɵpipe(4, \"async\");\n    i0.ɵɵtemplate(5, ProductsComponent_div_2_ng_template_5_Template, 2, 0, \"ng-template\", null, 5, i0.ɵɵtemplateRefExtractor);\n    i0.ɵɵelementStart(7, \"h2\");\n    i0.ɵɵtext(8, \"\\u0412\\u0430\\u0448\\u0438 \\u043A\\u0430\\u0440\\u0442\\u044B\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(9, ProductsComponent_div_2_div_9_Template, 2, 1, \"div\", 2);\n    i0.ɵɵpipe(10, \"async\");\n    i0.ɵɵtemplate(11, ProductsComponent_div_2_ng_template_11_Template, 2, 0, \"ng-template\", null, 6, i0.ɵɵtemplateRefExtractor);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"ngIf\", i0.ɵɵpipeBind1(4, 2, ctx_r2.accounts$));\n    i0.ɵɵadvance(6);\n    i0.ɵɵproperty(\"ngIf\", i0.ɵɵpipeBind1(10, 4, ctx_r2.cards$));\n  }\n}\n\nexport class ProductsComponent {\n  constructor(productService) {\n    this.productService = productService;\n    this.accounts$ = null; // Используем Observable для счетов\n\n    this.cards$ = null; // Observable для карт\n\n    this.loadingAccounts = true;\n    this.loadingCards = true;\n    this.errorMessage = '';\n    this.unsubscribe$ = new Subject(); // Для отписки от Observable\n  }\n\n  ngOnInit() {\n    this.loadAccounts();\n    this.loadCards();\n  }\n\n  loadAccounts() {\n    // Подписываемся на обновления данных счетов\n    this.accounts$ = this.productService.accounts$.pipe(takeUntil(this.unsubscribe$), catchError(err => {\n      this.errorMessage = 'Ошибка при получении счетов';\n      console.error('Ошибка при получении счетов:', err);\n      this.loadingAccounts = false;\n      return [];\n    }));\n    this.loadingAccounts = false;\n  }\n\n  loadCards() {\n    // Получаем карты клиента\n    this.cards$ = this.productService.getCards().pipe(takeUntil(this.unsubscribe$), catchError(err => {\n      this.errorMessage = 'Ошибка при получении карт';\n      console.error('Ошибка при получении карт:', err);\n      this.loadingCards = false;\n      return [];\n    }));\n    this.loadingCards = false;\n  }\n\n  ngOnDestroy() {\n    // Отписываемся от всех Observable при уничтожении компонента\n    this.unsubscribe$.next();\n    this.unsubscribe$.complete();\n  }\n\n}\n\nProductsComponent.ɵfac = function ProductsComponent_Factory(t) {\n  return new (t || ProductsComponent)(i0.ɵɵdirectiveInject(i1.ProductsService));\n};\n\nProductsComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: ProductsComponent,\n  selectors: [[\"app-products\"]],\n  decls: 3,\n  vars: 3,\n  consts: [[\"class\", \"loading\", 4, \"ngIf\"], [\"class\", \"error\", 4, \"ngIf\"], [4, \"ngIf\"], [1, \"loading\"], [1, \"error\"], [\"noAccounts\", \"\"], [\"noCards\", \"\"], [4, \"ngFor\", \"ngForOf\"]],\n  template: function ProductsComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵtemplate(0, ProductsComponent_div_0_Template, 2, 0, \"div\", 0);\n      i0.ɵɵtemplate(1, ProductsComponent_div_1_Template, 2, 1, \"div\", 1);\n      i0.ɵɵtemplate(2, ProductsComponent_div_2_Template, 13, 6, \"div\", 2);\n    }\n\n    if (rf & 2) {\n      i0.ɵɵproperty(\"ngIf\", ctx.loadingAccounts || ctx.loadingCards);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.errorMessage);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", !ctx.loadingAccounts && !ctx.loadingCards && !ctx.errorMessage);\n    }\n  },\n  directives: [i2.NgIf, i3.MatSpinner, i2.NgForOf, i4.MatCard, i4.MatCardTitle, i4.MatCardContent],\n  pipes: [i2.AsyncPipe],\n  styles: [\"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJwcm9kdWN0cy5jb21wb25lbnQuc2NzcyJ9 */\"]\n});","map":{"version":3,"sources":["/Users/nikitasmirnov/Desktop/bank/src/app/modules/toolbar/products/products.component.ts"],"names":["Subject","takeUntil","catchError","i0","i1","i2","i3","i4","ProductsComponent_div_0_Template","rf","ctx","ɵɵelementStart","ɵɵelement","ɵɵelementEnd","ProductsComponent_div_1_Template","ɵɵtext","ctx_r1","ɵɵnextContext","ɵɵadvance","ɵɵtextInterpolate1","errorMessage","ProductsComponent_div_2_div_3_mat_card_1_Template","account_r11","$implicit","ɵɵtextInterpolate","name","ɵɵtextInterpolate2","balance","currency","ProductsComponent_div_2_div_3_Template","ɵɵtemplate","accounts_r9","ngIf","ɵɵproperty","ProductsComponent_div_2_ng_template_5_Template","ProductsComponent_div_2_div_9_mat_card_1_Template","card_r14","number","limit","ProductsComponent_div_2_div_9_Template","cards_r12","ProductsComponent_div_2_ng_template_11_Template","ProductsComponent_div_2_Template","ɵɵpipe","ɵɵtemplateRefExtractor","ctx_r2","ɵɵpipeBind1","accounts$","cards$","ProductsComponent","constructor","productService","loadingAccounts","loadingCards","unsubscribe$","ngOnInit","loadAccounts","loadCards","pipe","err","console","error","getCards","ngOnDestroy","next","complete","ɵfac","ProductsComponent_Factory","t","ɵɵdirectiveInject","ProductsService","ɵcmp","ɵɵdefineComponent","type","selectors","decls","vars","consts","template","ProductsComponent_Template","directives","NgIf","MatSpinner","NgForOf","MatCard","MatCardTitle","MatCardContent","pipes","AsyncPipe","styles"],"mappings":"AAAA,SAASA,OAAT,QAAwB,MAAxB;AACA,SAASC,SAAT,EAAoBC,UAApB,QAAsC,gBAAtC;AACA,OAAO,KAAKC,EAAZ,MAAoB,eAApB;AACA,OAAO,KAAKC,EAAZ,MAAoB,sCAApB;AACA,OAAO,KAAKC,EAAZ,MAAoB,iBAApB;AACA,OAAO,KAAKC,EAAZ,MAAoB,oCAApB;AACA,OAAO,KAAKC,EAAZ,MAAoB,wBAApB;;AACA,SAASC,gCAAT,CAA0CC,EAA1C,EAA8CC,GAA9C,EAAmD;AAAE,MAAID,EAAE,GAAG,CAAT,EAAY;AAC7DN,IAAAA,EAAE,CAACQ,cAAH,CAAkB,CAAlB,EAAqB,KAArB,EAA4B,CAA5B;AACAR,IAAAA,EAAE,CAACS,SAAH,CAAa,CAAb,EAAgB,aAAhB;AACAT,IAAAA,EAAE,CAACU,YAAH;AACH;AAAE;;AACH,SAASC,gCAAT,CAA0CL,EAA1C,EAA8CC,GAA9C,EAAmD;AAAE,MAAID,EAAE,GAAG,CAAT,EAAY;AAC7DN,IAAAA,EAAE,CAACQ,cAAH,CAAkB,CAAlB,EAAqB,KAArB,EAA4B,CAA5B;AACAR,IAAAA,EAAE,CAACY,MAAH,CAAU,CAAV;AACAZ,IAAAA,EAAE,CAACU,YAAH;AACH;;AAAC,MAAIJ,EAAE,GAAG,CAAT,EAAY;AACV,UAAMO,MAAM,GAAGb,EAAE,CAACc,aAAH,EAAf;AACAd,IAAAA,EAAE,CAACe,SAAH,CAAa,CAAb;AACAf,IAAAA,EAAE,CAACgB,kBAAH,CAAsB,GAAtB,EAA2BH,MAAM,CAACI,YAAlC,EAAgD,IAAhD;AACH;AAAE;;AACH,SAASC,iDAAT,CAA2DZ,EAA3D,EAA+DC,GAA/D,EAAoE;AAAE,MAAID,EAAE,GAAG,CAAT,EAAY;AAC9EN,IAAAA,EAAE,CAACQ,cAAH,CAAkB,CAAlB,EAAqB,UAArB;AACAR,IAAAA,EAAE,CAACQ,cAAH,CAAkB,CAAlB,EAAqB,gBAArB;AACAR,IAAAA,EAAE,CAACY,MAAH,CAAU,CAAV;AACAZ,IAAAA,EAAE,CAACU,YAAH;AACAV,IAAAA,EAAE,CAACQ,cAAH,CAAkB,CAAlB,EAAqB,kBAArB;AACAR,IAAAA,EAAE,CAACY,MAAH,CAAU,CAAV;AACAZ,IAAAA,EAAE,CAACU,YAAH;AACAV,IAAAA,EAAE,CAACU,YAAH;AACH;;AAAC,MAAIJ,EAAE,GAAG,CAAT,EAAY;AACV,UAAMa,WAAW,GAAGZ,GAAG,CAACa,SAAxB;AACApB,IAAAA,EAAE,CAACe,SAAH,CAAa,CAAb;AACAf,IAAAA,EAAE,CAACqB,iBAAH,CAAqBF,WAAW,CAACG,IAAjC;AACAtB,IAAAA,EAAE,CAACe,SAAH,CAAa,CAAb;AACAf,IAAAA,EAAE,CAACuB,kBAAH,CAAsB,yCAAtB,EAAiEJ,WAAW,CAACK,OAA7E,EAAsF,GAAtF,EAA2FL,WAAW,CAACM,QAAvG,EAAiH,GAAjH;AACH;AAAE;;AACH,SAASC,sCAAT,CAAgDpB,EAAhD,EAAoDC,GAApD,EAAyD;AAAE,MAAID,EAAE,GAAG,CAAT,EAAY;AACnEN,IAAAA,EAAE,CAACQ,cAAH,CAAkB,CAAlB,EAAqB,KAArB;AACAR,IAAAA,EAAE,CAAC2B,UAAH,CAAc,CAAd,EAAiBT,iDAAjB,EAAoE,CAApE,EAAuE,CAAvE,EAA0E,UAA1E,EAAsF,CAAtF;AACAlB,IAAAA,EAAE,CAACU,YAAH;AACH;;AAAC,MAAIJ,EAAE,GAAG,CAAT,EAAY;AACV,UAAMsB,WAAW,GAAGrB,GAAG,CAACsB,IAAxB;AACA7B,IAAAA,EAAE,CAACe,SAAH,CAAa,CAAb;AACAf,IAAAA,EAAE,CAAC8B,UAAH,CAAc,SAAd,EAAyBF,WAAzB;AACH;AAAE;;AACH,SAASG,8CAAT,CAAwDzB,EAAxD,EAA4DC,GAA5D,EAAiE;AAAE,MAAID,EAAE,GAAG,CAAT,EAAY;AAC3EN,IAAAA,EAAE,CAACQ,cAAH,CAAkB,CAAlB,EAAqB,GAArB;AACAR,IAAAA,EAAE,CAACY,MAAH,CAAU,CAAV,EAAa,2IAAb;AACAZ,IAAAA,EAAE,CAACU,YAAH;AACH;AAAE;;AACH,SAASsB,iDAAT,CAA2D1B,EAA3D,EAA+DC,GAA/D,EAAoE;AAAE,MAAID,EAAE,GAAG,CAAT,EAAY;AAC9EN,IAAAA,EAAE,CAACQ,cAAH,CAAkB,CAAlB,EAAqB,UAArB;AACAR,IAAAA,EAAE,CAACQ,cAAH,CAAkB,CAAlB,EAAqB,gBAArB;AACAR,IAAAA,EAAE,CAACY,MAAH,CAAU,CAAV;AACAZ,IAAAA,EAAE,CAACU,YAAH;AACAV,IAAAA,EAAE,CAACQ,cAAH,CAAkB,CAAlB,EAAqB,kBAArB;AACAR,IAAAA,EAAE,CAACY,MAAH,CAAU,CAAV;AACAZ,IAAAA,EAAE,CAACU,YAAH;AACAV,IAAAA,EAAE,CAACU,YAAH;AACH;;AAAC,MAAIJ,EAAE,GAAG,CAAT,EAAY;AACV,UAAM2B,QAAQ,GAAG1B,GAAG,CAACa,SAArB;AACApB,IAAAA,EAAE,CAACe,SAAH,CAAa,CAAb;AACAf,IAAAA,EAAE,CAACqB,iBAAH,CAAqBY,QAAQ,CAACC,MAA9B;AACAlC,IAAAA,EAAE,CAACe,SAAH,CAAa,CAAb;AACAf,IAAAA,EAAE,CAACuB,kBAAH,CAAsB,mCAAtB,EAA2DU,QAAQ,CAACE,KAApE,EAA2E,GAA3E,EAAgFF,QAAQ,CAACR,QAAzF,EAAmG,GAAnG;AACH;AAAE;;AACH,SAASW,sCAAT,CAAgD9B,EAAhD,EAAoDC,GAApD,EAAyD;AAAE,MAAID,EAAE,GAAG,CAAT,EAAY;AACnEN,IAAAA,EAAE,CAACQ,cAAH,CAAkB,CAAlB,EAAqB,KAArB;AACAR,IAAAA,EAAE,CAAC2B,UAAH,CAAc,CAAd,EAAiBK,iDAAjB,EAAoE,CAApE,EAAuE,CAAvE,EAA0E,UAA1E,EAAsF,CAAtF;AACAhC,IAAAA,EAAE,CAACU,YAAH;AACH;;AAAC,MAAIJ,EAAE,GAAG,CAAT,EAAY;AACV,UAAM+B,SAAS,GAAG9B,GAAG,CAACsB,IAAtB;AACA7B,IAAAA,EAAE,CAACe,SAAH,CAAa,CAAb;AACAf,IAAAA,EAAE,CAAC8B,UAAH,CAAc,SAAd,EAAyBO,SAAzB;AACH;AAAE;;AACH,SAASC,+CAAT,CAAyDhC,EAAzD,EAA6DC,GAA7D,EAAkE;AAAE,MAAID,EAAE,GAAG,CAAT,EAAY;AAC5EN,IAAAA,EAAE,CAACQ,cAAH,CAAkB,CAAlB,EAAqB,GAArB;AACAR,IAAAA,EAAE,CAACY,MAAH,CAAU,CAAV,EAAa,+HAAb;AACAZ,IAAAA,EAAE,CAACU,YAAH;AACH;AAAE;;AACH,SAAS6B,gCAAT,CAA0CjC,EAA1C,EAA8CC,GAA9C,EAAmD;AAAE,MAAID,EAAE,GAAG,CAAT,EAAY;AAC7DN,IAAAA,EAAE,CAACQ,cAAH,CAAkB,CAAlB,EAAqB,KAArB;AACAR,IAAAA,EAAE,CAACQ,cAAH,CAAkB,CAAlB,EAAqB,IAArB;AACAR,IAAAA,EAAE,CAACY,MAAH,CAAU,CAAV,EAAa,yDAAb;AACAZ,IAAAA,EAAE,CAACU,YAAH;AACAV,IAAAA,EAAE,CAAC2B,UAAH,CAAc,CAAd,EAAiBD,sCAAjB,EAAyD,CAAzD,EAA4D,CAA5D,EAA+D,KAA/D,EAAsE,CAAtE;AACA1B,IAAAA,EAAE,CAACwC,MAAH,CAAU,CAAV,EAAa,OAAb;AACAxC,IAAAA,EAAE,CAAC2B,UAAH,CAAc,CAAd,EAAiBI,8CAAjB,EAAiE,CAAjE,EAAoE,CAApE,EAAuE,aAAvE,EAAsF,IAAtF,EAA4F,CAA5F,EAA+F/B,EAAE,CAACyC,sBAAlG;AACAzC,IAAAA,EAAE,CAACQ,cAAH,CAAkB,CAAlB,EAAqB,IAArB;AACAR,IAAAA,EAAE,CAACY,MAAH,CAAU,CAAV,EAAa,yDAAb;AACAZ,IAAAA,EAAE,CAACU,YAAH;AACAV,IAAAA,EAAE,CAAC2B,UAAH,CAAc,CAAd,EAAiBS,sCAAjB,EAAyD,CAAzD,EAA4D,CAA5D,EAA+D,KAA/D,EAAsE,CAAtE;AACApC,IAAAA,EAAE,CAACwC,MAAH,CAAU,EAAV,EAAc,OAAd;AACAxC,IAAAA,EAAE,CAAC2B,UAAH,CAAc,EAAd,EAAkBW,+CAAlB,EAAmE,CAAnE,EAAsE,CAAtE,EAAyE,aAAzE,EAAwF,IAAxF,EAA8F,CAA9F,EAAiGtC,EAAE,CAACyC,sBAApG;AACAzC,IAAAA,EAAE,CAACU,YAAH;AACH;;AAAC,MAAIJ,EAAE,GAAG,CAAT,EAAY;AACV,UAAMoC,MAAM,GAAG1C,EAAE,CAACc,aAAH,EAAf;AACAd,IAAAA,EAAE,CAACe,SAAH,CAAa,CAAb;AACAf,IAAAA,EAAE,CAAC8B,UAAH,CAAc,MAAd,EAAsB9B,EAAE,CAAC2C,WAAH,CAAe,CAAf,EAAkB,CAAlB,EAAqBD,MAAM,CAACE,SAA5B,CAAtB;AACA5C,IAAAA,EAAE,CAACe,SAAH,CAAa,CAAb;AACAf,IAAAA,EAAE,CAAC8B,UAAH,CAAc,MAAd,EAAsB9B,EAAE,CAAC2C,WAAH,CAAe,EAAf,EAAmB,CAAnB,EAAsBD,MAAM,CAACG,MAA7B,CAAtB;AACH;AAAE;;AACH,OAAO,MAAMC,iBAAN,CAAwB;AAC3BC,EAAAA,WAAW,CAACC,cAAD,EAAiB;AACxB,SAAKA,cAAL,GAAsBA,cAAtB;AACA,SAAKJ,SAAL,GAAiB,IAAjB,CAFwB,CAED;;AACvB,SAAKC,MAAL,GAAc,IAAd,CAHwB,CAGJ;;AACpB,SAAKI,eAAL,GAAuB,IAAvB;AACA,SAAKC,YAAL,GAAoB,IAApB;AACA,SAAKjC,YAAL,GAAoB,EAApB;AACA,SAAKkC,YAAL,GAAoB,IAAItD,OAAJ,EAApB,CAPwB,CAOW;AACtC;;AACDuD,EAAAA,QAAQ,GAAG;AACP,SAAKC,YAAL;AACA,SAAKC,SAAL;AACH;;AACDD,EAAAA,YAAY,GAAG;AACX;AACA,SAAKT,SAAL,GAAiB,KAAKI,cAAL,CAAoBJ,SAApB,CAA8BW,IAA9B,CAAmCzD,SAAS,CAAC,KAAKqD,YAAN,CAA5C,EAAiEpD,UAAU,CAACyD,GAAG,IAAI;AAChG,WAAKvC,YAAL,GAAoB,6BAApB;AACAwC,MAAAA,OAAO,CAACC,KAAR,CAAc,8BAAd,EAA8CF,GAA9C;AACA,WAAKP,eAAL,GAAuB,KAAvB;AACA,aAAO,EAAP;AACH,KAL2F,CAA3E,CAAjB;AAMA,SAAKA,eAAL,GAAuB,KAAvB;AACH;;AACDK,EAAAA,SAAS,GAAG;AACR;AACA,SAAKT,MAAL,GAAc,KAAKG,cAAL,CAAoBW,QAApB,GAA+BJ,IAA/B,CAAoCzD,SAAS,CAAC,KAAKqD,YAAN,CAA7C,EAAkEpD,UAAU,CAACyD,GAAG,IAAI;AAC9F,WAAKvC,YAAL,GAAoB,2BAApB;AACAwC,MAAAA,OAAO,CAACC,KAAR,CAAc,4BAAd,EAA4CF,GAA5C;AACA,WAAKN,YAAL,GAAoB,KAApB;AACA,aAAO,EAAP;AACH,KALyF,CAA5E,CAAd;AAMA,SAAKA,YAAL,GAAoB,KAApB;AACH;;AACDU,EAAAA,WAAW,GAAG;AACV;AACA,SAAKT,YAAL,CAAkBU,IAAlB;AACA,SAAKV,YAAL,CAAkBW,QAAlB;AACH;;AAtC0B;;AAwC/BhB,iBAAiB,CAACiB,IAAlB,GAAyB,SAASC,yBAAT,CAAmCC,CAAnC,EAAsC;AAAE,SAAO,KAAKA,CAAC,IAAInB,iBAAV,EAA6B9C,EAAE,CAACkE,iBAAH,CAAqBjE,EAAE,CAACkE,eAAxB,CAA7B,CAAP;AAAgF,CAAjJ;;AACArB,iBAAiB,CAACsB,IAAlB,GAAyB,aAAcpE,EAAE,CAACqE,iBAAH,CAAqB;AAAEC,EAAAA,IAAI,EAAExB,iBAAR;AAA2ByB,EAAAA,SAAS,EAAE,CAAC,CAAC,cAAD,CAAD,CAAtC;AAA0DC,EAAAA,KAAK,EAAE,CAAjE;AAAoEC,EAAAA,IAAI,EAAE,CAA1E;AAA6EC,EAAAA,MAAM,EAAE,CAAC,CAAC,OAAD,EAAU,SAAV,EAAqB,CAArB,EAAwB,MAAxB,CAAD,EAAkC,CAAC,OAAD,EAAU,OAAV,EAAmB,CAAnB,EAAsB,MAAtB,CAAlC,EAAiE,CAAC,CAAD,EAAI,MAAJ,CAAjE,EAA8E,CAAC,CAAD,EAAI,SAAJ,CAA9E,EAA8F,CAAC,CAAD,EAAI,OAAJ,CAA9F,EAA4G,CAAC,YAAD,EAAe,EAAf,CAA5G,EAAgI,CAAC,SAAD,EAAY,EAAZ,CAAhI,EAAiJ,CAAC,CAAD,EAAI,OAAJ,EAAa,SAAb,CAAjJ,CAArF;AAAgQC,EAAAA,QAAQ,EAAE,SAASC,0BAAT,CAAoCtE,EAApC,EAAwCC,GAAxC,EAA6C;AAAE,QAAID,EAAE,GAAG,CAAT,EAAY;AACzXN,MAAAA,EAAE,CAAC2B,UAAH,CAAc,CAAd,EAAiBtB,gCAAjB,EAAmD,CAAnD,EAAsD,CAAtD,EAAyD,KAAzD,EAAgE,CAAhE;AACAL,MAAAA,EAAE,CAAC2B,UAAH,CAAc,CAAd,EAAiBhB,gCAAjB,EAAmD,CAAnD,EAAsD,CAAtD,EAAyD,KAAzD,EAAgE,CAAhE;AACAX,MAAAA,EAAE,CAAC2B,UAAH,CAAc,CAAd,EAAiBY,gCAAjB,EAAmD,EAAnD,EAAuD,CAAvD,EAA0D,KAA1D,EAAiE,CAAjE;AACH;;AAAC,QAAIjC,EAAE,GAAG,CAAT,EAAY;AACVN,MAAAA,EAAE,CAAC8B,UAAH,CAAc,MAAd,EAAsBvB,GAAG,CAAC0C,eAAJ,IAAuB1C,GAAG,CAAC2C,YAAjD;AACAlD,MAAAA,EAAE,CAACe,SAAH,CAAa,CAAb;AACAf,MAAAA,EAAE,CAAC8B,UAAH,CAAc,MAAd,EAAsBvB,GAAG,CAACU,YAA1B;AACAjB,MAAAA,EAAE,CAACe,SAAH,CAAa,CAAb;AACAf,MAAAA,EAAE,CAAC8B,UAAH,CAAc,MAAd,EAAsB,CAACvB,GAAG,CAAC0C,eAAL,IAAwB,CAAC1C,GAAG,CAAC2C,YAA7B,IAA6C,CAAC3C,GAAG,CAACU,YAAxE;AACH;AAAE,GAVqD;AAUnD4D,EAAAA,UAAU,EAAE,CAAC3E,EAAE,CAAC4E,IAAJ,EAAU3E,EAAE,CAAC4E,UAAb,EAAyB7E,EAAE,CAAC8E,OAA5B,EAAqC5E,EAAE,CAAC6E,OAAxC,EAAiD7E,EAAE,CAAC8E,YAApD,EAAkE9E,EAAE,CAAC+E,cAArE,CAVuC;AAU+CC,EAAAA,KAAK,EAAE,CAAClF,EAAE,CAACmF,SAAJ,CAVtD;AAUsEC,EAAAA,MAAM,EAAE,CAAC,yKAAD;AAV9E,CAArB,CAAvC","sourcesContent":["import { Subject } from 'rxjs';\nimport { takeUntil, catchError } from 'rxjs/operators';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../../core/services/products.service\";\nimport * as i2 from \"@angular/common\";\nimport * as i3 from \"@angular/material/progress-spinner\";\nimport * as i4 from \"@angular/material/card\";\nfunction ProductsComponent_div_0_Template(rf, ctx) { if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 3);\n    i0.ɵɵelement(1, \"mat-spinner\");\n    i0.ɵɵelementEnd();\n} }\nfunction ProductsComponent_div_1_Template(rf, ctx) { if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 4);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r1.errorMessage, \"\\n\");\n} }\nfunction ProductsComponent_div_2_div_3_mat_card_1_Template(rf, ctx) { if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-card\");\n    i0.ɵɵelementStart(1, \"mat-card-title\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"mat-card-content\");\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n} if (rf & 2) {\n    const account_r11 = ctx.$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(account_r11.name);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate2(\" \\u0411\\u0430\\u043B\\u0430\\u043D\\u0441: \", account_r11.balance, \" \", account_r11.currency, \" \");\n} }\nfunction ProductsComponent_div_2_div_3_Template(rf, ctx) { if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtemplate(1, ProductsComponent_div_2_div_3_mat_card_1_Template, 5, 3, \"mat-card\", 7);\n    i0.ɵɵelementEnd();\n} if (rf & 2) {\n    const accounts_r9 = ctx.ngIf;\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngForOf\", accounts_r9);\n} }\nfunction ProductsComponent_div_2_ng_template_5_Template(rf, ctx) { if (rf & 1) {\n    i0.ɵɵelementStart(0, \"p\");\n    i0.ɵɵtext(1, \"\\u0423 \\u0432\\u0430\\u0441 \\u043D\\u0435\\u0442 \\u0434\\u043E\\u0441\\u0442\\u0443\\u043F\\u043D\\u044B\\u0445 \\u0441\\u0447\\u0435\\u0442\\u043E\\u0432.\");\n    i0.ɵɵelementEnd();\n} }\nfunction ProductsComponent_div_2_div_9_mat_card_1_Template(rf, ctx) { if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-card\");\n    i0.ɵɵelementStart(1, \"mat-card-title\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"mat-card-content\");\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n} if (rf & 2) {\n    const card_r14 = ctx.$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(card_r14.number);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate2(\" \\u041B\\u0438\\u043C\\u0438\\u0442: \", card_r14.limit, \" \", card_r14.currency, \" \");\n} }\nfunction ProductsComponent_div_2_div_9_Template(rf, ctx) { if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtemplate(1, ProductsComponent_div_2_div_9_mat_card_1_Template, 5, 3, \"mat-card\", 7);\n    i0.ɵɵelementEnd();\n} if (rf & 2) {\n    const cards_r12 = ctx.ngIf;\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngForOf\", cards_r12);\n} }\nfunction ProductsComponent_div_2_ng_template_11_Template(rf, ctx) { if (rf & 1) {\n    i0.ɵɵelementStart(0, \"p\");\n    i0.ɵɵtext(1, \"\\u0423 \\u0432\\u0430\\u0441 \\u043D\\u0435\\u0442 \\u0434\\u043E\\u0441\\u0442\\u0443\\u043F\\u043D\\u044B\\u0445 \\u043A\\u0430\\u0440\\u0442.\");\n    i0.ɵɵelementEnd();\n} }\nfunction ProductsComponent_div_2_Template(rf, ctx) { if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵelementStart(1, \"h2\");\n    i0.ɵɵtext(2, \"\\u0412\\u0430\\u0448\\u0438 \\u0441\\u0447\\u0435\\u0442\\u0430\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(3, ProductsComponent_div_2_div_3_Template, 2, 1, \"div\", 2);\n    i0.ɵɵpipe(4, \"async\");\n    i0.ɵɵtemplate(5, ProductsComponent_div_2_ng_template_5_Template, 2, 0, \"ng-template\", null, 5, i0.ɵɵtemplateRefExtractor);\n    i0.ɵɵelementStart(7, \"h2\");\n    i0.ɵɵtext(8, \"\\u0412\\u0430\\u0448\\u0438 \\u043A\\u0430\\u0440\\u0442\\u044B\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(9, ProductsComponent_div_2_div_9_Template, 2, 1, \"div\", 2);\n    i0.ɵɵpipe(10, \"async\");\n    i0.ɵɵtemplate(11, ProductsComponent_div_2_ng_template_11_Template, 2, 0, \"ng-template\", null, 6, i0.ɵɵtemplateRefExtractor);\n    i0.ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"ngIf\", i0.ɵɵpipeBind1(4, 2, ctx_r2.accounts$));\n    i0.ɵɵadvance(6);\n    i0.ɵɵproperty(\"ngIf\", i0.ɵɵpipeBind1(10, 4, ctx_r2.cards$));\n} }\nexport class ProductsComponent {\n    constructor(productService) {\n        this.productService = productService;\n        this.accounts$ = null; // Используем Observable для счетов\n        this.cards$ = null; // Observable для карт\n        this.loadingAccounts = true;\n        this.loadingCards = true;\n        this.errorMessage = '';\n        this.unsubscribe$ = new Subject(); // Для отписки от Observable\n    }\n    ngOnInit() {\n        this.loadAccounts();\n        this.loadCards();\n    }\n    loadAccounts() {\n        // Подписываемся на обновления данных счетов\n        this.accounts$ = this.productService.accounts$.pipe(takeUntil(this.unsubscribe$), catchError(err => {\n            this.errorMessage = 'Ошибка при получении счетов';\n            console.error('Ошибка при получении счетов:', err);\n            this.loadingAccounts = false;\n            return [];\n        }));\n        this.loadingAccounts = false;\n    }\n    loadCards() {\n        // Получаем карты клиента\n        this.cards$ = this.productService.getCards().pipe(takeUntil(this.unsubscribe$), catchError(err => {\n            this.errorMessage = 'Ошибка при получении карт';\n            console.error('Ошибка при получении карт:', err);\n            this.loadingCards = false;\n            return [];\n        }));\n        this.loadingCards = false;\n    }\n    ngOnDestroy() {\n        // Отписываемся от всех Observable при уничтожении компонента\n        this.unsubscribe$.next();\n        this.unsubscribe$.complete();\n    }\n}\nProductsComponent.ɵfac = function ProductsComponent_Factory(t) { return new (t || ProductsComponent)(i0.ɵɵdirectiveInject(i1.ProductsService)); };\nProductsComponent.ɵcmp = /*@__PURE__*/ i0.ɵɵdefineComponent({ type: ProductsComponent, selectors: [[\"app-products\"]], decls: 3, vars: 3, consts: [[\"class\", \"loading\", 4, \"ngIf\"], [\"class\", \"error\", 4, \"ngIf\"], [4, \"ngIf\"], [1, \"loading\"], [1, \"error\"], [\"noAccounts\", \"\"], [\"noCards\", \"\"], [4, \"ngFor\", \"ngForOf\"]], template: function ProductsComponent_Template(rf, ctx) { if (rf & 1) {\n        i0.ɵɵtemplate(0, ProductsComponent_div_0_Template, 2, 0, \"div\", 0);\n        i0.ɵɵtemplate(1, ProductsComponent_div_1_Template, 2, 1, \"div\", 1);\n        i0.ɵɵtemplate(2, ProductsComponent_div_2_Template, 13, 6, \"div\", 2);\n    } if (rf & 2) {\n        i0.ɵɵproperty(\"ngIf\", ctx.loadingAccounts || ctx.loadingCards);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.errorMessage);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", !ctx.loadingAccounts && !ctx.loadingCards && !ctx.errorMessage);\n    } }, directives: [i2.NgIf, i3.MatSpinner, i2.NgForOf, i4.MatCard, i4.MatCardTitle, i4.MatCardContent], pipes: [i2.AsyncPipe], styles: [\"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJwcm9kdWN0cy5jb21wb25lbnQuc2NzcyJ9 */\"] });\n"]},"metadata":{},"sourceType":"module"}